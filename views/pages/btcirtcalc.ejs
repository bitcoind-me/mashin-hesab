<!DOCTYPE html>
<html id="dom_html">

<head>
  <meta charset="utf-8">
  <meta id="viewportelem" name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="ماشین‌حساب تبدیل تومان به ساتوشی و بیت‌کوین و برعکس" />
  <meta property="og:image" content="https://bitcoind.me/assets/images/calculator-share-card.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="800" />
  <meta property="og:image:height" content="420" />
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:site" content="calc.bitcoind.me">
  <meta property="twitter:title" content="ماشین‌حساب بیت‌کوین">
  <meta property="twitter:description" content="ماشین‌حساب تبدیل تومان به ساتوشی و بیت‌کوین و برعکس">
  <meta property="twitter:creator" content="bitcoind_me">
  <meta property="twitter:image:src" content="https://bitcoind.me/assets/images/calculator-share-card.png">
  <meta property="twitter:domain" content="bitcoind.me">
  <title>
    ماشین‌حساب بیت‌کوین
  </title>
  <link href="/static/css/index.css" rel="stylesheet">
  <link href="/static/css/hamburgermenu-vertical.css" rel="stylesheet">
  <script src="/static/script/moment.js" type="text/javascript"></script>
  <script src="/static/script/moment-timezone-with-data.js" type="text/javascript"></script>
</head>

<body class="noselect">
  <nav role="navigation">
    <div class="blex-nav-wrapper pb-1">
      <div class="row">
        <div class="col text-left"
          style="font-family: 'Baloo Bhaina 2', cursive;font-size:140%;padding-top:.6em;padding-bottom:.2em;padding-left:1em;">
          <div style="font-family: 'Baloo Bhaina 2', cursive;">
            <span style="color:#5cd12e;">calc</span><span style="color:#fff;">.</span><span
              style="color:#ffa233;">bitcoind</span><span style="color:#fff;">.me</span>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="navbar" id="navbar">
    <div class="hamburgermenuitem" style="width:300px;direction: rtl;padding-top:20px;">
      <div><a href="https://bitcoind.me">
          <span style="width:70px;padding-left:10px;"><img src="static/images/house-building.png"
              style="height:45px;vertical-align: bottom;"></span>
          <span class="ir_title_bold" style="width:200px;text-align: right;">
            منابع فارسی بیت‌کوین</span></a>
      </div>
      <div style="padding-top:20px;">
        <a href="https://anchor.fm/bitcoind-me">
          <span style="width:70px;padding-left:10px;"><img src="static/images/studio-microphone.png"
              style="height:45px;vertical-align: bottom;"></span>
          <span class="ir_title_bold" style="width:200px;text-align: right;">پادکست</span></a>
      </div>
    </div>
    <a class="close" href="#">
      <img src="static/images/ham-close.svg" alt="close">
    </a>
  </div>
  <a class="hamburger" href="#navbar">
    <img src="static/images/ham-light.png" alt="menu">
  </a>


  <div id="help_part" class="container" style="color:white;direction: rtl;display:none;">
    <div class="help-body" style="padding-left:10px;padding-right:10px;">
      <div style="direction: ltr;cursor: pointer;" onclick="">
        <img src="/static/images/close-red.png" style="height:30px;padding-top:9px;" onclick="hide_help()">
      </div>
      <p class="ir_title_bold" style="text-align:center;font-size:1.2em;">
        ماشین‌حساب بیت‌کوین
      </p>
      <br />
      <p class="ir_title">
        این ابزار برای تبدیل واحد تومان به بیت‌کوین و ساتوشی و بالعکس در معاملات خرد تهیه شده است. نرخ تبدیل
        براساس آخرین معاملات صرافی‌های معتبر ایرانی محاسبه می‌شود.
      </p>
      <p class="ir_title">
        پس از اجرای ماشین‌حساب مشاهده خواهید کرد که ارزش ۱۰۰هزار ساتوشی (یا ۱ میلی بیت‌کوین) به تومان چقدر است.
        شما می‌توانید مقدار
        موردنظر خود را با استفاده از صفحه‌کلید ماشین‌حساب وارد کنید.
      </p>
      <p class="ir_title">
        برای تغییر حالت ماشین‌حساب از تومان به بیت‌کوین و برعکس می‌توانید از دکمه تبدیل، که با آیکون دو فلش سبز
        و
        نارنجی متمایز شده، استفاده کنید. برای تبدیل واحد بیت‌کوین به ساتوشی و بالعکس روی بخش بالایی ماشین‌حساب
        کلیک کنید.
      </p>
      <br />
      <p class="ir_title_bold">
        کلیدهای میان‌بر:
      </p>
      <p class="ir_title" style="direction:ltr;text-align:left;">
        X: تغییر حالت ماشین‌حساب<br />
        B: تغییر واحد نمایش بیت‌کوین<br />
        R: به‌روزکردن نرخ<br />
        C: ریست‌کردن ماشین‌حساب
      </p>
    </div>
  </div>

  <div id="calc_part" class="container" style="display:block;">
    <div class="calc-body">
      <div id="input_val" style="display:none;color: white;">0</div>
      <div class="calc-screen" onclick="change_denomination_mode()">
        <div id="top_row" class="calc-toprow calc-satbased"> 0 </div>
        <div id="bottom_row" class="calc-bottomrow calc-irtbased"> 0 </span> </div>
      </div>
      <div class="calc-button-row">
        <div class="button" onclick="push_char('7')"> 7 </div>
        <div class="button" onclick="push_char('8')"> 8 </div>
        <div class="button" onclick="push_char('9')"> 9 </div>
        <div class="button c" onclick="clear_calc()"> AC </div>
      </div>
      <div class="calc-button-row">
        <div class="button" onclick="push_char('4')"> 4 </div>
        <div class="button" onclick="push_char('5')"> 5 </div>
        <div class="button" onclick="push_char('6')"> 6 </div>
        <div class="button l" onclick="change_calc_mode()"
          style="background:no-repeat center url('/static/images/up-down-arrow.png');background-size: 45%;background-color: #404D5E;">
          &nbsp; </div>
      </div>
      <div class="calc-button-row">
        <div class="button" onclick="push_char('1')"> 1 </div>
        <div class="button" onclick="push_char('2')"> 2 </div>
        <div class="button" onclick="push_char('3')"> 3 </div>
        <div class="button l" onclick="show_help()"
          style="background:no-repeat center url('/static/images/info-icon.png');background-size: 35%;background-color: #404D5E;">
          &nbsp; </div>
      </div>
      <div class="calc-button-row">
        <div class="button" onclick="push_char('.')"> . </div>
        <div class="button" onclick="push_char('0')">0</div>
        <div class="button" onclick="push_char('000')">000</div>
        <div class="button l" onclick="pop_lastchar()"
          style="background:no-repeat center url('/static/images/backspace.png');background-size: 45%;background-color: #404D5E;">
          &nbsp; </div>
      </div>
      <div class="calc-lastupdaterow" style="direction:rtl;">
        <div style="opacity:.7;border-bottom:solid 1px #425062;padding-bottom: 5px;padding-top: 5px;">
          <span style="font-size:.7em;">
            <label class="ir_title">آخرین به‌روزرسانی نرخ تبدیل:</label>
            <label class="ir_title" id="lbllastupdate"></label>
            <label class="ir_title" id="lbllasttrade"></label>
            <label id="lblrefreshhint" class="ir_title" style="visibility:hidden;display: block;cursor: pointer;"
              onclick="update_rates()">
              (جهت به‌روزرسانی نرخ، اینجا را لمس کنید یا دکمه R را بزنید.)</label>
          </span>
        </div>
      </div>
    </div>

    <script>
      if (screen.height < 670) {
        var mvp = document.getElementById("viewportelem");
        mvp.setAttribute("content", "width=device-width,initial-scale=.9");
      }
    </script>

    <script type="text/javascript">
      var _lastupdate = "<%= _param_lastupdate %>"
      var _lasttrade = "(<%= _param_lasttrade %>)"
      var _btcirt = parseInt("<%= _param_btcirtprice %>")
      var _pristine = true
      var _calcmode = 0 // 0:irt=>btc
      var _btcdenominationmode = 0 // 0:sat

      init_calc()
      function init_calc() {
        if (_calcmode == 0) {
          document.getElementById('top_row').classList.remove('calc-satbased')
          document.getElementById('top_row').classList.add('calc-irtbased')
          document.getElementById('bottom_row').classList.remove('calc-irtbased')
          document.getElementById('bottom_row').classList.add('calc-satbased')
          document.getElementById('top_row').textContent = parseFloat(parseInt(_btcirt / 1000)).toLocaleString('en-US') + ' IRT'
          if (_btcdenominationmode == 0)
            document.getElementById('bottom_row').textContent = '100,000 sat'
          else
            document.getElementById('bottom_row').textContent = '0.001 btc'
        } else if (_calcmode == 1) {
          document.getElementById('top_row').classList.remove('calc-irtbased')
          document.getElementById('top_row').classList.add('calc-satbased')
          document.getElementById('bottom_row').classList.remove('calc-satbased')
          document.getElementById('bottom_row').classList.add('calc-irtbased')
          if (_btcdenominationmode == 0)
            document.getElementById('top_row').textContent = '100,000 sat'
          else
            document.getElementById('top_row').textContent = '0.001 btc'
          document.getElementById('bottom_row').textContent = parseFloat(parseInt(_btcirt / 1000)).toLocaleString('en-US') + ' IRT'
        }
        document.getElementById('lbllasttrade').textContent = _lasttrade
        setTimeout(() => {
          document.getElementById('lbllasttrade').style.display = 'none'
          document.getElementById('lblrefreshhint').style.visibility = 'visible'
        }, 5000);
      }
      function clear_calc() {
        document.getElementById('input_val').textContent = '0'
        if (_calcmode == 0) {
          document.getElementById('top_row').textContent = '0 IRT'
          if (_btcdenominationmode == 0)
            document.getElementById('bottom_row').textContent = '0 sat'
          else
            document.getElementById('bottom_row').textContent = '0 btc'
        } else if (_calcmode == 1) {
          if (_btcdenominationmode == 0)
            document.getElementById('top_row').textContent = '0 sat'
          else
            document.getElementById('top_row').textContent = '0 btc'
          document.getElementById('bottom_row').textContent = '0 IRT'
        }
        _pristine = true
      }
      function update_rates() {
        window.location.reload(true)
      }
      function push_char(char) {
        if (document.getElementById('top_row').textContent.length + char.length > 19)
          return
        if (document.getElementById('bottom_row').textContent.length + char.length > 19)
          return
        if (char == '.' && document.getElementById('input_val').textContent.indexOf('.') > 0)
          return
        if (char == '.' && _calcmode == 0 || char == '.' && _btcdenominationmode == 0)
          return
        if (_pristine == false) {
          if (_calcmode == 1 && _btcdenominationmode == 1 && document.getElementById('input_val').textContent.length >= 10) {
            return
          }
          document.getElementById('input_val').textContent = document.getElementById('input_val').textContent + char
          if (_calcmode == 0)
            calculate_irt2btc()
          else if (_calcmode == 1)
            calculate_btc2irt()
          return
        }
        if (_btcdenominationmode == 0) {
          if (_pristine == true && (char == '0' || char == '000' || char == '.')) {
            return
          } else if (_pristine == true) {
            document.getElementById('top_row').textContent = ''
            document.getElementById('bottom_row').textContent = ''
            document.getElementById('input_val').textContent = ''
          }
          document.getElementById('input_val').textContent = document.getElementById('input_val').textContent + char
        } else if (_btcdenominationmode == 1) {
          if (_pristine == true && (char == '000')) {
            return
          }
          if (_calcmode == 0) {
            if (_pristine && char != '0' && char != '000' && char != '.') {
              document.getElementById('top_row').textContent = ''
              document.getElementById('bottom_row').textContent = ''
              document.getElementById('input_val').textContent = ''
              document.getElementById('input_val').textContent = document.getElementById('input_val').textContent + char
            } else {
              if (_pristine)
                return
            }
          } else {
            if (_pristine) {
              document.getElementById('top_row').textContent = ''
              document.getElementById('bottom_row').textContent = ''
              document.getElementById('input_val').textContent = ''
              if (char == '0' || char == '.') {
                document.getElementById('input_val').textContent = document.getElementById('input_val').textContent + '0.'
                if (_calcmode == 1) {
                  document.getElementById('top_row').textContent = '0.'
                }
              } else if (char != '.') {
                document.getElementById('input_val').textContent = document.getElementById('input_val').textContent + char
              }
            }
          }
        }
        if (_calcmode == 0)
          calculate_irt2btc()
        else if (_calcmode == 1)
          calculate_btc2irt()
        _pristine = false
      }
      function pop_lastchar() {
        if (!_pristine && document.getElementById('input_val').textContent.length > 1) {
          document.getElementById('input_val').textContent = document.getElementById('input_val').textContent.slice(0, -1)
        } if (!_pristine && document.getElementById('input_val').textContent.length == 1) {
          document.getElementById('input_val').textContent = '0'
          _pristine = true
        }
        if (_calcmode == 0)
          calculate_irt2btc()
        else if (_calcmode == 1)
          calculate_btc2irt()
      }
      function calculate_irt2btc() {
        document.getElementById('top_row').textContent = parseInt(document.getElementById('input_val').textContent).toLocaleString('en-US') + ' IRT'
        if (_btcdenominationmode == 0) {
          var _sats_total = parseFloat(parseInt(document.getElementById('input_val').textContent) / _btcirt) * 100000000
          document.getElementById('bottom_row').textContent = parseInt(_sats_total.toFixed(0)).toLocaleString('en-US') + ' sat'
        } else if (_btcdenominationmode == 1) {
          var _btc_total = parseFloat(parseFloat(document.getElementById('input_val').textContent) / _btcirt)
          document.getElementById('bottom_row').textContent = parseFloat(_btc_total.toFixed(8)) + ' btc'
        }
      }
      function calculate_btc2irt() {
        if (_btcdenominationmode == 0) {
          document.getElementById('top_row').textContent = parseInt(document.getElementById('input_val').textContent).toLocaleString('en-US') + ' sat'
          var _irt_total = parseFloat(parseInt(document.getElementById('input_val').textContent) * _btcirt) / 100000000
          document.getElementById('bottom_row').textContent = parseInt(_irt_total.toFixed(0)).toLocaleString('en-US') + ' IRT'
        } else if (_btcdenominationmode == 1) {
          if (_calcmode == 0)
            document.getElementById('top_row').textContent = parseFloat(document.getElementById('input_val').textContent).toFixed(8).toLocaleString('en-US') + ' btc'
          else {
            document.getElementById('top_row').textContent = document.getElementById('input_val').textContent + ' btc'
          }
          var _irt_total = parseFloat(parseFloat(document.getElementById('input_val').textContent) * _btcirt)
          document.getElementById('bottom_row').textContent = parseInt(_irt_total.toFixed(0)).toLocaleString('en-US') + ' IRT'
        }
      }
      function change_calc_mode() {
        if (_calcmode == 0)
          _calcmode = 1
        else
          _calcmode = 0

        if (_pristine == true) {
          init_calc()
          clear_calc()
        }
        else {
          if (_calcmode == 0) {
            document.getElementById('top_row').classList.remove('calc-satbased')
            document.getElementById('top_row').classList.add('calc-irtbased')
            document.getElementById('bottom_row').classList.remove('calc-irtbased')
            document.getElementById('bottom_row').classList.add('calc-satbased')
          } else if (_calcmode == 1) {
            document.getElementById('top_row').classList.remove('calc-irtbased')
            document.getElementById('top_row').classList.add('calc-satbased')
            document.getElementById('bottom_row').classList.remove('calc-satbased')
            document.getElementById('bottom_row').classList.add('calc-irtbased')
          }
          clear_calc()
        }
      }
      function change_denomination_mode() {
        var _changed_denomination = 0
        if (_calcmode == 0) { // irt2btc
          if (_btcdenominationmode == 0) {
            _changed_denomination = parseFloat(parseInt(document.getElementById('bottom_row').textContent.slice(0, -4).replaceAll(',', ''))) / 100000000
            document.getElementById('bottom_row').textContent = parseFloat(_changed_denomination.toFixed(8)) + ' btc'
            _btcdenominationmode = 1
          }
          else {
            _changed_denomination = parseFloat(document.getElementById('bottom_row').textContent.slice(0, -4).replaceAll(',', '')) * 100000000
            document.getElementById('bottom_row').textContent = _changed_denomination.toLocaleString('en-US') + ' sat'
            _btcdenominationmode = 0
          }
        } else if (_calcmode == 1) { // btc2irt
          if (_btcdenominationmode == 0) {
            _changed_denomination = parseFloat(parseInt(document.getElementById('top_row').textContent.slice(0, -4).replaceAll(',', ''))) / 100000000
            document.getElementById('top_row').textContent = parseFloat(_changed_denomination.toFixed(8)) + ' btc'
            document.getElementById('input_val').textContent = _changed_denomination
            _btcdenominationmode = 1
          }
          else {
            _changed_denomination = parseFloat(document.getElementById('top_row').textContent.slice(0, -4).replaceAll(',', '')) * 100000000
            document.getElementById('top_row').textContent = _changed_denomination.toFixed(0).toLocaleString('en-US') + ' sat'
            document.getElementById('top_row').textContent = _changed_denomination.toLocaleString('en-US') + ' sat'
            document.getElementById('input_val').textContent = parseInt(_changed_denomination)
            _btcdenominationmode = 0
          }
        }
      }
      function show_help() {
        document.getElementById('calc_part').style.display = 'none'
        document.getElementById('help_part').style.display = 'block'
        document.getElementById('dom_html').style.height = 'auto'
      }
      function hide_help() {
        document.getElementById('calc_part').style.display = 'block'
        document.getElementById('help_part').style.display = 'none'
        document.getElementById('dom_html').style.height = '100vh'
      }

      document.addEventListener('keydown', logKey);
      function logKey(e) {
        if ((e.which >= 48 && e.which <= 57) || (e.which >= 96 && e.which <= 105)) {
          push_char(e.key)
        }
        // . key
        if (e.which == 190 || e.which == 110) {
          push_char('.')
        }
        // C key
        if (e.which == 67) {
          clear_calc()
        }
        // B key
        if (e.which == 66) {
          change_denomination_mode()
        }
        // R key
        if (e.which == 82) {
          update_rates()
        }
        // X key
        if (e.which == 88) {
          change_calc_mode()
        }
        // Backspace
        if (e.which == 8) {
          pop_lastchar()
        }
      }

      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      var lastupdateval = moment(parseInt(_lastupdate)).tz(timezone).format('HH:mm')
      document.getElementById('lbllastupdate').textContent = lastupdateval
    </script>

</body>

</html>